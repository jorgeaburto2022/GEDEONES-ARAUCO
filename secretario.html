<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secretario</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .navbar-custom {
            background-color: #343a40;
        }

        .navbar-custom .navbar-brand,
        .navbar-custom .nav-link {
            color: #ffffff;
        }

        .content-container {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <div class="container">
            <a class="navbar-brand" href="index.html">Inicio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="tesoreria.html">Tesorería</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="actividades.html">Actividades</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="visitas_colegio.html">Visitas a Colegio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="visitas_iglesias.html">Visitas a Iglesias</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="secretario.html">Secretario</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <div class="container content-container">
        <h2 class="text-center mb-4">Secretario</h2>
        <p class="text-center">Página para la gestión de las tareas del secretario.</p>

        <!-- Formulario para agregar informes mensuales -->
        <div class="mt-5">
            <h4>Agregar Informe Mensual</h4>
            <form id="informeForm">
                <div class="mb-3">
                    <label for="mes" class="form-label">Mes</label>
                    <select class="form-select" id="mes" required>
                        <option value="enero">Enero</option>
                        <option value="febrero">Febrero</option>
                        <option value="marzo">Marzo</option>
                        <option value="abril">Abril</option>
                        <option value="mayo">Mayo</option>
                        <option value="junio">Junio</option>
                        <option value="julio">Julio</option>
                        <option value="agosto">Agosto</option>
                        <option value="septiembre">Septiembre</option>
                        <option value="octubre">Octubre</option>
                        <option value="noviembre">Noviembre</option>
                        <option value="diciembre">Diciembre</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="informe" class="form-label">Informe</label>
                    <textarea class="form-control" id="informe" rows="5" required></textarea>
                </div>
                <button type="button" class="btn btn-primary" onclick="guardarInforme()">Guardar Informe</button>
            </form>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const apiUrl = 'http://localhost:5000/api/informes'; // Cambia esta URL a la dirección de tu servidor Node.js

        // Función para guardar el informe en el servidor
        async function guardarInforme() {
            const mes = document.getElementById('mes').value;
            const informe = document.getElementById('informe').value;
            const token = localStorage.getItem('token'); // Asumiendo que usas token de autenticación

            if (!mes || !informe) {
                alert('Por favor, complete todos los campos.');
                return;
            }

            const data = { mes, informe };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}` // Si tu servidor requiere autenticación
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    const error = await response.json();
                    console.error('Error al guardar el informe:', error.message);
                    alert(`Error: ${error.message}`);
                } else {
                    alert('Informe guardado correctamente');
                    document.getElementById('informeForm').reset(); // Limpiar formulario
                }
            } catch (error) {
                console.error('Error de red:', error);
                alert('Error de red. Verifica tu conexión.');
            }
        }
    </script>
</body>

</html>
